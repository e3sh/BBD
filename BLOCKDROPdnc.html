<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8" />
    <script type="text/javascript">
        function DisplayControl($,_,t,i,s,e="use"){n="undefined"!=typeof OffscreenCanvas&&"use"==e?new offScreenTypeC(_,t,i,s):new offScreen,this.buffer=n;var n,h=$;this.cw=_,this.ch=t,h.font="16px 'Arial'",this.lighter_enable=!0,this.view=n.view,this.flip=n.flip;var r=1,o="";this.setInterval=function($){0==$?n.flip(!1):n.flip(!0),r=$},this.setBackgroundcolor=function($){o=$,this.backgroundcolor=o},this.getInterval=function(){return r},this.getBackgroundcolor=function(){return o},this.putPattern=function($,_,t,i,s,e){n.drawImgXYWHXYWH($,_.x,_.y,_.w,_.h,t,i,s,e)},this.setBgPattern=function($){bg_ptn=$},this.print=function($,_,t,i){Boolean(i)||(i="limegreen"),n.fillText($,_,t,i)},this.putImage=function($,_,t){n.drawImgXY($,_,t)},this.putImage2=function($,_,t,i,s){n.drawImgXYWH($,_,t,i,s)},this.putImageTransform=function($,_,t,i,s,e,h){n.putImageTransform($,_,t,i,s,e,h)},this.transform=function($,_,t,i){n.Transform($,_,t,i,0,0)},this.putFunc=function($){n.putFunc($)},this.clear=function($){this.flip()&&(n.allClear(0,0,_,t),void 0===$&&($=o),Boolean($)&&n.fillRect(0,0,_,t,$))},this.fill=function($,_,t,i,s){n.fillRect($,_,t,i,s)},this.reset=function(){n.reset()},this.reflash=function(){n.reflash()},this.draw=function(){n.draw(h)},this.count=function(){return n.count()},this.max=function(){return n.max()}}function fontPrintControl($,_,t,i,s,e,n){var h=$.screen[0].buffer;this.useScreen=function(_){h=$.screen[_].buffer};let r=_,o=s;var a=[];let u=[[12288,12289,12290,65292,65294,12539,65306,65307,65311,65281,12443,12444,180,65344,168,65342,65507,65343,12541,12542,12445,12446,12291,20189,12293,12294,12295,12540,8213,8208,65295,92,12316,8214,65372,8230,8229,8216,8217,8220,8221,65288,65289,12308,12309,65339,65341,65371,65373,12296,12297,12298,12299,12300,12301,12302,12303,12304,12305,65291,8722,177,215,247,65309,8800,65308,65310,8806,8807,8734,8756,9794,9792,176,8242,8243,8451,65509,65284,162,163,65285,65283,65286,65290,65312,167,9734,9733,9675,9679,9678,9671],[9670,9633,9632,9651,9650,9661,9660,8251,12306,8594,8592,8593,8595,12307,0,0,0,0,0,0,0,0,0,0,0,8712,8715,8838,8839,8834,8835,0,0,0,0,0,0,0,0,0,0,8743,8744,172,8658,8660,8704,8707,0,0,0,0,0,0,0,0,0,0,0,0,0,8978,8706,8711,0,0,8810,8811,0,8765,8733,0,0,8748,0,0,0,0,0,0,0,8491,8240,9839,9837,9834,8224,8225,182,0,0,0,0,9711],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65296,65297,65298,65299,65300,65301,65302,65303,65304,65305,0,0,0,0,0,0,0,65313,65314,65315,65316,65317,65318,65319,65320,65321,65322,65323,65324,65325,65326,65327,65328,65329,65330,65331,65332,65333,65334,65335,65336,65337,65338,0,0,0,0,0,0,65345,65346,65347,65348,65349,65350,65351,65352,65353,65354,65355,65356,65357,65358,65359,65360,65361,65362,65363,65364,65365,65366,65367,65368,65369,65370,0,0,0,0]];for(let c in u)for(let l in u[c])0!=u[c][l]&&(a[u[c][l]]={x:l,y:c});function f($){let _=!1,s,h,u,c,l;if(u=4,c=12,l=0,$<128&&(s=Math.floor($%16)*t,h=Math.floor($/16)*i,u=t,c=i,l=0),$>=parseInt("FF60",16)&&$<=parseInt("FF9F",16)){let f=$-parseInt("FF60",16);s=Math.floor(f%16)*t,h=Math.floor(f/16)*i+10*i,u=t,c=i,l=1}void 0!==a[$]&&(s=a[$].x*e,h=a[$].y*n,u=e,c=n,_=!0,l=2);let d={};return d.img=_?o:r,d.x=s,d.y=h,d.w=u,d.h=c,d.type=l,d}this.print=function($,_,t){for(let i=0,s=$.length;i<s;i++){let e=$.charCodeAt(i),n=f(e);h.drawImgXYWHXYWH(n.img,n.x,n.y,n.w,n.h,_,t,n.w,n.h),_+=n.w}},this.putchr=function($,_,t,i){var s=!1;Boolean(i)?1!=i&&(s=!0):i=1;for(var e=0,n=$.length;e<n;e++){var r=$.charCodeAt(e);let o=f(r),a=_,u=t;h.drawImgXYWHXYWH(o.img,o.x,o.y,o.w-1,o.h-1,a,u,Math.floor(o.w*i),Math.floor(o.h*i)),_+=o.w*i}}}function GameAssetManager(){var $=[];this.imageLoad=function(_,t){return $[_]=new ImageAsset(t),$[_].img},this.image=$,ImageAsset=function($){this.uri=$,this.ready=!1,this.img=new Image,this.img.src=$,this.loadcheck=function(){return this.ready=this.img.complete,this.img.complete}};var _=[];this.soundLoad=function($,t){return _[$]=new AudioAsset(t),_[$].sound},this.sound=_,AudioAsset=function($){var _=".mp3";"probably"==new Audio().canPlayType("audio/ogg")&&(_=".ogg"),this.ready=!1,this.sound=new Audio($+_),this.sound.addEventListener("loadeddata",function($){this.ready=!0}),this.uri=$+_,this.pos=0,this.loadcheck=function(){return this.ready=0!=this.sound.readyState,this.sound.readyState}},this.check=function(){var t=[];for(var i in $){var s=$[i].uri.split("/",20);t.push("["+i+"] "+s[s.length-1]+" "+($[i].loadcheck()?"o":"x"))}var e=["Noting","Mata","Current","Future","Ok"];for(var i in _){var s=_[i].uri.split("/",20),n=_[i].loadcheck();t.push("["+i+"] "+s[s.length-1]+" "+n+"/"+e[n])}return t},this.namelist=function(){var t=[];for(var i in $)$[i].uri.split("/",20),t.push(i);for(var i in _)_[i].uri.split("/",20),t.push(i);return t}}function GameCore($){var _=0,t=Date.now();window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function($,i){++_>60&&(_=1,t=Date.now());var s,e=t+Math.round(16.666666666666668*_)-Date.now();e<=0&&(e=1),setTimeout($,e)};var i=!1,s=new GameTaskControl(this),e=new inputKeyboard,n=new inputMouse,h=new inputGamepad,r=new inputTouchPad($.canvasId),o=new inputVirtualPad(n,r),a=[],u=document.getElementById($.canvasId);u.width=$.screen[0].resolution.w,u.height=$.screen[0].resolution.h,this.systemCanvas=u;var c=u.getContext("2d");for(var l in $.screen){var f=$.screen[l];a[l]=new DisplayControl(c,f.resolution.w,f.resolution.h,f.resolution.x,f.resolution.y,$.offscreen)}if($.length>0)var d=a[0];var p=new GameSpriteControl(this),m=[];this.setSpFont=function($){var _={Image:y.image[$.id].img,pattern:$.pattern},t=new GameSpriteFontControl(this,_);m[$.name]=t};for(var y=new GameAssetManager,v=new soundControl(y),g=$.screen.length,w=new function $(){var _,t,i,s,e=0,n=[],h=[],r=0,o=0,a=0,u=0,c=0,l=0;this.start=function(){_=t,t=performance.now()},this.end=function(){i=performance.now()-t,s=t-_,r>o&&(o=r),n[r]=s,h[r]=i,++r>59&&(r=0);for(var $=0,u=0;u<=o;u++)$+=n[u];e++,a=1e3/($/(o+1))},this.result=function(){for(var $=0,_=999,t=0,i=0,s=999,e=0,r=0,u=0,c=0;c<=o;c++)$<n[c]&&($=n[c]),_>n[c]&&(_=n[c]),i<h[c]&&(i=h[c]),s>h[c]&&(s=h[c]),r+=h[c],u+=n[c];t=u/(o+1),e=r/(o+1);var l={};l.fps=a;var f={};f.log=n,f.max=i,f.min=s,f.ave=e;var d={};return d.log=n,d.max=$,d.min=_,d.ave=t,l.interval=d,l.workload=f,l},this.setTime=function($){c=u,(l+=(u=$)-c)>1500&&(l=0)},this.readTime=function(){return u-c},this.nowTime=function(){return u},this.blink=function(){return l<500}},b=[],l=0;l<g;l++)b[l]=0;function x($){if(i){w.setTime($),w.start(),s.step();for(var _=0;_<g;_++)a[_].getInterval()-b[_]==1&&(a[_].reflash(),a[_].clear());s.draw(),p.allDrawSprite();for(var _=0;_<g;_++)a[_].draw();w.end();for(var _=0;_<g;_++)b[_]++,b[_]>=a[_].getInterval()&&(b[_]=0);requestAnimationFrame(arguments.callee)}}this.task=s,this.asset=y,this.keyboard=e,this.mouse=n,this.gamepad=h,this.joystick=h,this.touchpad=r,this.vgamepad=o,this.dsp=d,this.screen=a,this.sound=v,this.sprite=p,this.font=m,this.state={},this.fpsload=w,this.deltaTime=w.readTime,this.time=w.nowTime,this.blink=w.blink,p.useScreen(0),this.run=function(){i=!0,requestAnimationFrame(x)},this.pause=function(){i=!1}}class GameTask{id;enable;visible;preFlag;constructor($){this.id=$,this.enable=!0,this.visible=!0,this.preFlag=!1}init($){}pre($){}step($){}draw($){}post($){}}function GameTaskControl($){var _=[],t=0,i="";function s(){for(var $ in t=0,i="",_)i+=$+" ",t++}this.read=function($){return _[$]},this.add=function(t){_[t.id]=t,t.init($),s()},this.del=function($){_[$].post(),delete _[$],s()},this.init=function(t){_[t].init($)},this.step=function(){for(var t in _){var i=_[t];i.preFlag||(i.pre($),i.preFlag=!0),i.enable&&i.step($)}},this.draw=function(){for(var t in _){var i=_[t];i.visible&&i.draw($)}},this.count=function(){return t},this.namelist=function(){return i}}function inputGamepad(){var $,_=window.Gamepad,t=navigator.getGamepads;this.upkey,this.downkey,this.leftkey=!1,this.rightkey=!1,this.btn_start=!1,this.btn_back=!1,this.btn_lb=!1,this.btn_rb=!1,this.btn_lt=!1,this.btn_rt=!1,this.btn_l3=!1,this.btn_r3=!1,this.btn_a=!1,this.btn_b=!1,this.btn_x=!1,this.btn_y=!1,this.r,this.ls_x,this.ls_y,this.rs_x,this.rs_y;var i=!1;this.button,this.axes,this.check=function(){if(i=!1,!(_&&t))return!1;var s=($=navigator.getGamepads())[0];return!!s&&(i=!0,this.update(s),i)},this.update=function($){var _=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],t=$.buttons,i=$.axes;this.button=t,this.axes=i,this.upkey=t[_[12]].pressed,this.downkey=t[_[13]].pressed,this.leftkey=t[_[14]].pressed,this.rightkey=t[_[15]].pressed,this.btn_start=t[_[9]].pressed,this.btn_back=t[_[8]].pressed,this.btn_lb=t[_[4]].pressed,this.btn_rb=t[_[5]].pressed,this.btn_lt=t[_[6]].pressed,this.btn_rt=t[_[7]].pressed,this.btn_l3=t[_[10]].pressed,this.btn_r3=t[_[11]].pressed,this.btn_a=t[_[0]].pressed,this.btn_b=t[_[1]].pressed,this.btn_x=t[_[2]].pressed,this.btn_y=t[_[3]].pressed,this.ls_x=$.axes[0],this.ls_y=$.axes[1],this.rs_x=$.axes[2],this.rs_y=$.axes[3];var s,e,n=Math.floor(100*i[0]),h=Math.floor(100*i[1]);this.r=10>Math.abs(n)&&10>Math.abs(h)?-1:(s=100*n,e=100*h,0==s?e>=0?180:0:Math.atan(e/s)*(180/Math.PI)+(s>=0?90:270))},this.infodraw=function(){var $=[];return $.push("[Gamepad]"),$.push("Up   ["+(this.upkey?"o":"-")+"]"),$.push("Down ["+(this.downkey?"o":"-")+"]"),$.push("Left ["+(this.leftkey?"o":"-")+"]"),$.push("Right["+(this.rightkey?"o":"-")+"]"),$.push(""),$.push("(A)  ["+(this.btn_a?"o":"-")+"]"),$.push("(B)  ["+(this.btn_b?"o":"-")+"]"),$.push("(X)  ["+(this.btn_x?"o":"-")+"]"),$.push("(Y)  ["+(this.btn_y?"o":"-")+"]"),$.push(""),$.push("START["+(this.btn_start?"o":"-")+"]"),$.push("BACK ["+(this.btn_back?"o":"-")+"]"),$.push("LB   ["+(this.btn_lb?"o":"-")+"]"),$.push("RB   ["+(this.btn_rb?"o":"-")+"]"),$.push("LT   ["+(this.btn_lt?"o":"-")+"]"),$.push("RT   ["+(this.btn_rt?"o":"-")+"]"),$.push("L3   ["+(this.btn_l3?"o":"-")+"]"),$.push("R3   ["+(this.btn_r3?"o":"-")+"]"),$.push(""),$.push("r = "+this.r),$.push(""),$.push("Ls_x: "+this.ls_x),$.push("Ls_y: "+this.ls_y),$.push("Rs_x: "+this.rs_x),$.push("Rs_y: "+this.rs_y),$}}function inputKeyboard(){var $=[];this.upkey=!1,this.downkey=!1,this.leftkey=!1,this.rightkey=!1,this.shift=!1,this.ctrl=!1,this.alt=!1,this.space=!1,this.qkey=!1,this.wkey=!1,this.ekey=!1,this.akey=!1,this.skey=!1,this.dkey=!1,this.zkey=!1,this.xkey=!1,this.ckey=!1,window.addEventListener("blur",function(_){$=[]},!1),window.addEventListener("keydown",function(_){$[_.keyCode]=!0},!1),window.addEventListener("keyup",function(_){$[_.keyCode]=!1},!1),this.check=function(){for(var _ in function $(){this.upkey=!1,this.downkey=!1,this.leftkey=!1,this.rightkey=!1,this.shift=!1,this.ctrl=!1,this.space=!1,this.qkey=!1,this.wkey=!1,this.ekey=!1,this.akey=!1,this.skey=!1,this.dkey=!1,this.zkey=!1,this.xkey=!1,this.ckey=!1}(),$)switch(_){case"16":this.shift=$[16];break;case"17":this.ctrl=$[17];break;case"18":this.alt=$[18];break;case"32":this.space=$[32];break;case"38":this.upkey=$[38];break;case"40":this.downkey=$[40];break;case"37":this.leftkey=$[37];break;case"39":this.rightkey=$[39];break;case"65":this.akey=$[65];break;case"67":this.ckey=$[67];break;case"68":this.dkey=$[68];break;case"69":this.ekey=$[69];break;case"81":this.qkey=$[81];break;case"83":this.skey=$[83];break;case"87":this.wkey=$[87];break;case"88":this.xkey=$[88];break;case"90":this.zkey=$[90]}return $},this.state=function(){return $}}function inputMouse(){var $={x:0,y:0,button:0,wheel:0},_=0,t=0,i=-1,s=0,e=document;e.addEventListener("mousemove",function($){_=$.clientX,t=$.clientY},!1),e.addEventListener("mousedown",function($){i=$.button},!1),e.addEventListener("mouseup",function($){i=-1},!1),e.addEventListener("mousewheel",function($){s=$.wheelDelta},!1),e.addEventListener("DOMMouseScroll",function($){s=$.detail},!1),this.check=function(){return $.x=_,$.y=t,$.button=i,$.wheel=s,0!=i&&(i=-1),s=0,$},this.check_last=function(){return $.x=_,$.y=t,$.button=i,$.wheel=s,$},this.draw=function($){var _=this.check_last(),t={};t.x=_.x,t.y=_.y,t.draw=function($){var _=$;_.beginPath(),_.moveTo(this.x,this.y),_.lineTo(this.x+10,this.y+10),_.globalAlpha=1,_.strokeStyle="white",_.lineWidth=3,_.stroke()},$.putFunc(t)}}function inputTouchPad($){var _=[],t=document.getElementById($);this.o_Left=t.offsetLeft,this.o_Top=t.offsetTop;var i=!1;function s($){$.preventDefault(),n($),i=!0}function e($){$.preventDefault(),n($),i=!1}function n($){if(_=[],$.touches.length>0)for(var t=0;t<$.touches.length;t++){var i=$.touches[t];_[t]={},_[t].x=i.pageX,_[t].y=i.pageY,_[t].id=i.identifier}}document.addEventListener("touchstart",s,{passive:!1}),document.addEventListener("touchmove",s,{passive:!1}),document.addEventListener("touchend",e,{passive:!1}),document.addEventListener("touchcancel",e,{passive:!1}),this.check=function(){var $={};return $.pos=_,$},this.check_last=function(){var $={};return $.pos=_,$},this.draw=function($){if(i){this.check_last();for(var t="p "+_.length+"/",s=0;s<=_.length-1;s++){t=t+"b"+s+" ";var e={};e.x=_[s].x,e.y=_[s].y,e.r=16,e.draw=function($){var _=$;_.beginPath(),_.arc(this.x,this.y,this.r,0,2*Math.PI,!0),_.strokeStyle="white",_.lineWidth=2,_.stroke()},$.putFunc(e)}}}}function inputVirtualPad($,_){var t={};t.X=0,t.Y=0;var i={};i.X=80,i.Y=320,i.R=75;for(var s=[],e=0;e<=1;e++)s[e]={},s[e].X=440+80*(e+1),s[e].Y=320,s[e].R=28,s[e].ON=!1;for(var e=0;e<=1;e++)s[e+2]={},s[e+2].X=560,s[e+2].Y=280+80*e,s[e+2].R=28,s[e+2].ON=!1;var n=[],h=0,r=[],o=-1,a=!1;function u($,_,t,i){var s,e,n=t-$,h=i-_;return 0==n?s=h>=0?180:0:(s=(e=Math.atan(h/n),e*(180/Math.PI)),n>=0&&h>=0&&(s=90+s),n>=0&&h<0&&(s=90+s),n<0&&h<0&&(s=270+s),n<0&&h>=0&&(s=270+s)),s}function c($,_,t,i){return Math.floor(Math.sqrt(Math.pow(Math.abs($-t),2)+Math.pow(Math.abs(_-i),2)))}this.check=function(){var t=_.check_last(),e=$.check_last();n=[],t.pos.length<=0?-1!=e.button?(n.push({x:e.x,y:e.y}),a=!0):a=!1:(n=t.pos,a=!0),h=0,r=[];for(var l=0;l<=f;l++)r[l]=!1;o=-1;var f=s.length-1,d=0,p=-1;if(n.length>0)for(var m=0;m<n.length;m++){var y=c(n[m].x,n[m].y,i.X,i.Y);i.R>y&&(d=Math.floor(u(i.X,i.Y,n[m].x,n[m].y)),p=y);for(var l=0;l<=f;l++)s[l].R>c(s[l].X,s[l].Y,n[m].x,n[m].y)&&(r[l]=!0)}h=d,o=p;var v={};return v.button=r,v.deg=d,v.distance=p,v},this.check_last=function(){var $={};return $.button=r,$.deg=h,$.distance=o,$},this.draw=function($){if(a){var _=this.check_last(),t=s.length-1,e={};e.x=i.X,e.y=i.Y,e.r=i.R,e.bt=s,e.draw=function($){var _=$;_.beginPath(),_.arc(this.x,this.y,this.r,0,2*Math.PI,!0),_.fillStyle="gray",_.globalAlpha=.5,_.fill();for(var t=0;t<=this.bt.length-1;t++)_.beginPath(),_.arc(this.bt[t].X,this.bt[t].Y,this.bt[t].R,0,2*Math.PI,!0),_.fillStyle="gray",_.fill()},$.putFunc(e);var h="p "+n.length+"/";if(_.distance>0){h=h+"d "+_.deg+":"+_.distance;var e={};e.x=i.X,e.y=i.Y,e.vx=Math.cos(ToRadian(_.deg-90))*i.R,e.vy=Math.sin(ToRadian(_.deg-90))*i.R,e.sr=(_.deg+225)%360/180*Math.PI,e.draw=function($){var _=$;_.beginPath(),_.strokeStyle="orange",_.lineWidth=60,_.arc(this.x,this.y,40,this.sr,this.sr+.5*Math.PI,!1),_.stroke()},$.putFunc(e)}for(var r=0;r<=t;r++)if(_.button[r]){h=h+"b"+r+" ";var e={};e.x=i.X,e.y=i.Y,e.r=i.R,e.bt=s[r],e.draw=function($){var _=$;_.beginPath(),_.arc(this.bt.X,this.bt.Y,this.bt.R-5,0,2*Math.PI,!0),_.fillStyle="orange",_.fill()},$.putFunc(e)}}},ToRadian=$=>$*(Math.PI/180)}function offScreen(){for(var $=0,_=[],t=0;t<4e3;t++)_[t]=new m;var i=[],s=0;function e(){return++$>=4e3&&($=0),_[$]}var n=!0,h=!0;this.view=function($){return"boolean"==typeof $&&(n=$),n},this.flip=function($){return"boolean"==typeof $&&(h=$),n},this.spPut=function($,_,t,s,n,h,o,a,u,c,l,f,d,p,m,y,v){var g=e();g.img=$,g.sx=_,g.sy=t,g.sw=s,g.sh=n,g.dx=h,g.dy=o,g.dw=a,g.dh=u,g.m11=c,g.m12=l,g.m21=f,g.m22=d,g.tx=p,g.ty=m,g.alpha=y,g.r=v,g.mode=r,i[i.length]=g},this.drawImgXYWHXYWH=function($,_,t,s,n,h,r,a,u){var c=e();c.img=$,c.sx=_,c.sy=t,c.sw=s,c.sh=n,c.dx=h,c.dy=r,c.dw=a,c.dh=u,c.mode=o,i[i.length]=c},this.fillText=function($,_,t,s){Boolean(s)||(s="limegreen");var n=e();n.text=$,n.sx=_,n.sy=t,n.color=s,n.mode=c,i[i.length]=n},this.drawImgXY=function($,_,t){var s=e();s.img=$,s.sx=_,s.sy=t,s.mode=u,i[i.length]=s},this.drawImgXYWH=function($,_,t,s,n){var h=e();h.img=$,h.sx=_,h.sy=t,h.sw=s,h.sh=n,h.mode=a,i[i.length]=h},this.putImageTransform=function($,_,t,s,n,h,r){var o=e();o.img=$,o.tx=_,o.ty=t,o.m11=s,o.m12=n,o.m21=h,o.m22=r,o.mode=l,i[i.length]=o},this.transform=function($,_,t,s){var n=e();n.m11=$,n.m12=_,n.m21=t,n.m22=s,n.mode=f,i[i.length]=n},this.putFunc=function($){i[i.length]=$},this.allClear=function($,_,t,s){var n=e();n.sx=$,n.sy=_,n.sw=t,n.sh=s,n.mode=d,i[i.length]=n},this.fillRect=function($,_,t,s,n){var h=e();h.sx=$,h.sy=_,h.sw=t,h.sh=s,h.color=n,h.mode=p,i[i.length]=h},this.reset=function(){i.length>4e3&&(i.length=0),i=[],$=0},this.reflash=function(){h&&this.reset()},this.draw=function($){if(n){for(var _=0,t=i.length;_<t;_++)i[_].draw($);s<i.length&&(s=i.length)}},this.count=function(){return i.length},this.max=function(){return s};var r=1,o=2,a=3,u=4,c=5,l=6,f=7,d=8,p=9;function m(){this.img,this.text,this.sx,this.sy,this.sw,this.sh,this.dx,this.dy,this.dw,this.dh,this.color,this.m11,this.m12,this.m21,this.m22,this.tx,this.ty,this.alpha,this.r,this.mode}m.prototype.func=[],m.prototype.func[0]=function($){},m.prototype.func[r]=function($){$.save(),$.setTransform(this.m11,this.m12,this.m21,this.m22,this.tx,this.ty),0!=this.r&&$.rotate(Math.PI/180*this.r),255==this.alpha?$.globalCompositeOperation="source-over":$.globalAlpha=this.alpha*(1/255),$.drawImage(this.img,this.sx,this.sy,this.sw,this.sh,this.dx,this.dy,this.dw,this.dh),$.restore()},m.prototype.func[o]=function($){$.drawImage(this.img,this.sx,this.sy,this.sw,this.sh,this.dx,this.dy,this.dw,this.dh)},m.prototype.func[a]=function($){$.drawImage(this.img,this.sx,this.sy,this.sw,this.sh)},m.prototype.func[u]=function($){$.drawImage(this.img,this.sx,this.sy)},m.prototype.func[c]=function($){$.fillStyle=this.color,$.fillText(this.text,this.sx,this.sy)},m.prototype.func[l]=function($){$.save(),$.setTransform(this.m11,this.m12,this.m21,this.m22,this.tx,this.ty),$.drawImage(this.img,0,0),$.restore()},m.prototype.func[f]=function($){},m.prototype.func[d]=function($){},m.prototype.func[p]=function($){Boolean(this.color)?($.fillStyle=this.color,$.fillRect(this.sx,this.sy,this.sw,this.sh)):$.clearRect(this.sx,this.sy,this.sw,this.sh)},m.prototype.draw=function($){this.func[this.mode].call(this,$)}}function offScreenTypeC($,_,t,i){let s=new OffscreenCanvas($,_),e=t,n=i;s.width=$,s.height=_;let h=s.getContext("2d");var r=!0,o=!0;this.view=function($){return"boolean"==typeof $&&(r=$),r},this.flip=function($){return"boolean"==typeof $&&(o=$),r},this.spPut=function($,_,t,i,s,e,n,r,o,a,u,c,l,f,d,p,m){h.save(),h.setTransform(a,u,c,l,f,d),0!=m&&h.rotate(Math.PI/180*m),255==p?h.globalCompositeOperation="source-over":h.globalAlpha=p*(1/255),h.drawImage($,_,t,i,s,e,n,r,o),h.restore()},this.drawImgXYWHXYWH=function($,_,t,i,s,e,n,r,o){h.drawImage($,_,t,i,s,e,n,r,o)},this.fillText=function($,_,t,i){Boolean(i)||(i="limegreen"),h.fillStyle=i,h.fillText($,_,t)},this.drawImgXY=function($,_,t){h.drawImage($,_,t)},this.drawImgXYWH=function($,_,t,i,s){h.drawImage($,_,t,i,s)},this.putImageTransform=function($,_,t,i,s,e,n){h.save(),h.setTransform(i,s,e,n,_,t),h.drawImage($,0,0),h.restore()},this.transform=function($,_,t,i){},this.putFunc=function($){$.draw(h)},this.allClear=function($,_,t,i){h.save(),h.setTransform(1,0,0,1,0,0),h.clearRect($,_,t,i),h.restore()},this.fillRect=function($,_,t,i,s){Boolean(s)?(h.fillStyle=s,h.fillRect($,_,t,i)):h.clearRect($,_,t,i)},this.reset=function(){o&&this.allClear(0,0,$,_)},this.reflash=function(){o&&this.reset()},this.draw=function($){r&&$.drawImage(s,e,n)},this.count=function(){return"mode"},this.max=function(){return"C"}}function priorityBuffer(){for(var $=0,_=[],t=0;t<4e3;t++)_[t]=new d;var i=[],s=0;function e(){return++$>=4e3&&($=0),_[$]}this.spPut=function($,_,t,s,h,r,o,a,u,c,l,f,d,p,m,y,v){var g=e();g.img=$,g.sx=_,g.sy=t,g.sw=s,g.sh=h,g.dx=r,g.dy=o,g.dw=a,g.dh=u,g.m11=c,g.m12=l,g.m21=f,g.m22=d,g.tx=p,g.ty=m,g.alpha=y,g.r=v,g.mode=n,i[i.length]=g},this.drawImgXYWHXYWH=function($,_,t,s,n,r,o,a,u){var c=e();c.img=$,c.sx=_,c.sy=t,c.sw=s,c.sh=n,c.dx=r,c.dy=o,c.dw=a,c.dh=u,c.mode=h,i[i.length]=c},this.fillText=function($,_,t,s){Boolean(s)||(s="limegreen");var n=e();n.text=$,n.sx=_,n.sy=t,n.color=s,n.mode=a,i[i.length]=n},this.drawImgXY=function($,_,t){var s=e();s.img=$,s.sx=_,s.sy=t,s.mode=o,i[i.length]=s},this.drawImgXYWH=function($,_,t,s,n){var h=e();h.img=$,h.sx=_,h.sy=t,h.sw=s,h.sh=n,h.mode=r,i[i.length]=h},this.putImageTransform=function($,_,t,s,n,h,r){var o=e();o.img=$,o.tx=_,o.ty=t,o.m11=s,o.m12=n,o.m21=h,o.m22=r,o.mode=u,i[i.length]=o},this.transform=function($,_,t,s){var n=e();n.m11=$,n.m12=_,n.m21=t,n.m22=s,n.mode=c,i[i.length]=n},this.putFunc=function($){i[i.length]=$},this.allClear=function($,_,t,s){var n=e();n.sx=$,n.sy=_,n.sw=t,n.sh=s,n.mode=l,i[i.length]=n},this.fillRect=function($,_,t,s,n){var h=e();h.sx=$,h.sy=_,h.sw=t,h.sh=s,h.color=n,h.mode=f,i[i.length]=h},this.reset=function(){i.length>4e3&&(i.length=0),i=[],$=0},this.reflash=function(){enable_reset_flag&&this.reset()},this.draw=function($){if(enable_draw_flag){for(var _=0,t=i.length;_<t;_++)i[_].draw($);s<i.length&&(s=i.length)}},this.count=function(){return i.length},this.max=function(){return s};var n=1,h=2,r=3,o=4,a=5,u=6,c=7,l=8,f=9;function d(){this.img,this.text,this.sx,this.sy,this.sw,this.sh,this.dx,this.dy,this.dw,this.dh,this.color,this.m11,this.m12,this.m21,this.m22,this.tx,this.ty,this.alpha,this.r,this.mode}d.prototype.func=[],d.prototype.func[0]=function($){},d.prototype.func[n]=function($){$.save(),$.setTransform(this.m11,this.m12,this.m21,this.m22,this.tx,this.ty),0!=this.r&&$.rotate(Math.PI/180*this.r),255==this.alpha?$.globalCompositeOperation="source-over":$.globalAlpha=this.alpha*(1/255),$.drawImage(this.img,this.sx,this.sy,this.sw,this.sh,this.dx,this.dy,this.dw,this.dh),$.restore()},d.prototype.func[h]=function($){$.drawImage(this.img,this.sx,this.sy,this.sw,this.sh,this.dx,this.dy,this.dw,this.dh)},d.prototype.func[r]=function($){$.drawImage(this.img,this.sx,this.sy,this.sw,this.sh)},d.prototype.func[o]=function($){$.drawImage(this.img,this.sx,this.sy)},d.prototype.func[a]=function($){$.fillStyle=this.color,$.fillText(this.text,this.sx,this.sy)},d.prototype.func[u]=function($){$.save(),$.setTransform(this.m11,this.m12,this.m21,this.m22,this.tx,this.ty),$.drawImage(this.img,0,0),$.restore()},d.prototype.func[c]=function($){},d.prototype.func[l]=function($){},d.prototype.func[f]=function($){Boolean(this.color)?($.fillStyle=this.color,$.fillRect(this.sx,this.sy,this.sw,this.sh)):$.clearRect(this.sx,this.sy,this.sw,this.sh)},d.prototype.draw=function($){this.func[this.mode].call(this,$)}}function soundControl($){var _=$.sound;this.play=function($){var t=_[$].sound;t.ended&&(t.currentTime=0),t.play()},this.effect=function($){Boolean(_[$])&&(_[$].sound.currentTime=0,_[$].sound.play())},this.running=function($){return!_[$].ended},this.info=function($){var t=_[$];return t.currentTime/t.duration*100},this.restart=function($){_[$].currentTime=0},this.volume=function($,t){_[$].volume=t}}function GameSpriteControl($){var _,t=[],i=[],s=!0;function e(){this.x=0,this.y=0,this.r=0,this.z=0,this.priority=0,this.collisionEnable=!0,this.collision={w:0,h:0},this.id,this.count=0,this.pcnt=0,this.visible=!1,this.hit=[],this.alive=0,this.vx=0,this.vy=0}function n($,t,i,s,e,n,h){if(Boolean(e)||(e=t.r),Boolean(h)||(h=255),Boolean(n)||(n=1),t.fv||t.fh||0!=e||255!=h){var r=t.fv?-1:1,o=t.fh?-1:1;_.spPut($,t.x,t.y,t.w,t.h,-t.w/2*n,-t.h/2*n,t.w*n,t.h*n,o,0,0,r,i,s,h,e)}else _.drawImgXYWHXYWH($,t.x,t.y,t.w,t.h,i+-t.w/2*n,s+-t.h/2*n,t.w*n,t.h*n)}this.set=function($,_,i,s,n){Boolean(t[$])||(t[$]=new e),t[$].id=_,t[$].count=0,t[$].pcnt=0,Boolean(i)?(t[$].collisionEnable=!0,t[$].collision={w:s,h:n}):t[$].collisionEnable=!1,t[$].visible=!1},this.setMove=function($,_,i,s){var e=t[$],n=(_-90)*(Math.PI/180);e.vx=Math.cos(n)*i,e.vy=Math.sin(n)*i,e.alive=s},this.pos=function($,_,i,s,e){var n=t[$];n.x=_,n.y=i,n.r=s,n.z=e,n.visible=!0,t[$]=n},this.reset=function($){var _=t[$];_.visible=!1,_.collisionEnable=!1,_.alive=0,_.vx=0,_.vy=0},this.manualDraw=function($){s=!$},this.useScreen=function(t){_=$.screen[t].buffer},this.put=function($,s,e,h,r){var o=t[$];o.x=s,o.y=e,o.r=h,o.z=r,Boolean(i[o.id])?(n(i[o.id].image,i[o.id].pattern[o.pcnt],s,e,h,r),o.count++,o.count>i[o.id].wait&&(o.count=0,o.pcnt++),o.pcnt>i[o.id].pattern.length-1&&(o.pcnt=0)):_.fillText($+" "+o.count,s,e)},this.get=function($){if(Boolean($))return Boolean(t[$])||(t[$]=new e),t[$];var _=-1;for(var i in t)t[i].visible||(_=i);return -1==_&&(_=t.length),_},this.setPattern=function(_,t){i[_]={image:$.asset.image[t.image].img,wait:t.wait,pattern:t.pattern}},this.check=function($){var _=[];for(var i in t){var s=t[i];s.visible&&s.collisionEnable&&_.push(i)}for(var e=[],n={x:t[$].x,y:t[$].y,w:t[$].collision.w/2,h:t[$].collision.h/2},i=0,h=_.length;i<h;i++)if($!=_[i]){var r={x:t[_[i]].x,y:t[_[i]].y,w:t[_[i]].collision.w/2,h:t[_[i]].collision.h/2};Math.abs(n.x-r.x)<n.w+r.w&&Math.abs(n.y-r.y)<n.h+r.h&&e.push(_[i])}return e},this.allDrawSprite=function(){if(s)for(var $ in t){var e=t[$];e.alive>0&&(e.alive--,e.x+=e.vx,e.y+=e.vy,e.alive<=0&&(e.visible=!1)),e.visible&&(Boolean(i[e.id])?(n(i[e.id].image,i[e.id].pattern[e.pcnt],e.x,e.y,e.r,e.z),e.count++,e.count>i[e.id].wait&&(e.count=0,e.pcnt++),e.pcnt>i[e.id].pattern.length-1&&(e.pcnt=0)):_.fillText($+" "+e.count,e.x,e.y))}}}function GameSpriteFontControl($,_){var t=$.screen[0].buffer;this.useScreen=function(_){t=$.screen[_].buffer};var i=_.Image,s=_.pattern;this.putchr=function($,_,e,n){var h=!1;Boolean(n)?1!=n&&(h=!0):n=1;for(var r=0,o=$.length;r<o;r++){var a=$.charCodeAt(r);if(a>=32&&a<128){var u=s[a-32],c=_+r*(u.w*n),l=e;h&&(c+=-u.w/2*n,l+=-u.h/2*n),t.drawImgXYWHXYWH(i,u.x,u.y,u.w,u.h,c,l,u.w*n,u.h*n)}}}}
    </script>
    <script src="blockdrop_main.js" type="text/javascript"></script>

    <title>BlockDrop-dnc_th16</title>
    <style>
        * {
            margin:0; padding:0;
        } 
        .resizeimage * { width: 100%; }
    </style>
</head>
<body onload="main()">
    <canvas id="layer0" oncontextmenu="return false;">
    layer-0
    </canvas>
</body>
</html>